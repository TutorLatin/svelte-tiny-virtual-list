<script>
	import VirtualList from '$lib/VirtualList.svelte';

	/** @type {number[]} */
	let rowHeights = $state.raw([]);

	randomize();

	function randomize() {
		let newRowHeights = [];

		for (let i = 0; i < 10000; i++) {
			newRowHeights.push(Math.random() * (155 - 50) + 50);
		}

		// Replace the array reference to trigger updates
		rowHeights = newRowHeights;
	}
</script>

<svelte:head>
	<title>Variable heights | svelte-tiny-virtual-list</title>
</svelte:head>

<div id="variable-heights-example" class="example-page">
	<h3>Variable heights</h3>

	<button class="responsive margin" onclick={randomize}>
		<i aria-hidden="true">shuffle</i>
		<span>Randomize heights</span>
	</button>

	<article>
		<VirtualList itemCount={10000} itemSize={rowHeights}>
			{#snippet item({ style, index })}
				<div {style} class="virtual-list-row">
					Item #{index}
				</div>
			{/snippet}
		</VirtualList>
	</article>

	<!-- TODO: Show example code -->
</div>

<style>
	article {
		height: 500px;
	}
</style>
